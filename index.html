<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <title>I N C I | Admin Panel</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; padding: 20px; color: #1c1e21; }
        .box { background: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        h3 { margin-top: 0; color: #2563eb; border-bottom: 2px solid #f0f2f5; padding-bottom: 10px; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0 18px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 15px; }
        button { background: #2563eb; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.3s; }
        button:hover { background: #1d4ed8; }
        .order-card { border-left: 6px solid #2563eb; padding: 15px; margin-bottom: 15px; background: #fff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .status-select { background: #f8fafc; border-color: #2563eb; font-weight: 600; width: auto; margin-right: 10px; }
        .red-btn { background: #ef4444; width: auto; padding: 8px 15px; }
    </style>
</head>
<body>

    <div class="box">
        <h3>Yeni M…ôhsul ∆èlav…ô Et</h3>
        <input id="pName" placeholder="M…ôhsulun adƒ±">
        <input id="pPrice" type="number" placeholder="Qiym…ôti (AZN)">
        <input id="pImg" placeholder="≈û…ôkil URL (ibb.co linki)">
        
        <label>Kateqoriya:</label>
        <select id="pCategory">
            <option value="Elektronika">Elektronika</option>
            <option value="≈ûirniyyat">≈ûirniyyat</option>
            <option value="Geyim">Geyim</option>
            <option value="∆ètirl…ôr">∆ètirl…ôr</option>
            <option value="Ayaqqabƒ±">Ayaqqabƒ±</option>
            <option value="≈ûalvar">≈ûalvar</option>
            <option value="Zin…ôt …ô≈üyalarƒ±">Zin…ôt …ô≈üyalarƒ±</option>
        </select>

        <label>Etiket (Badge):</label>
        <select id="pTag">
            <option value="">Yoxdur</option>
            <option value="Yeni">Yeni</option>
            <option value="Endirim">Endirim</option>
        </select>
        
        <button onclick="addProduct()">Bazaya G√∂nd…ôr</button>
    </div>

    <div class="box">
        <h3>G…ôl…ôn Sifari≈ül…ôr</h3>
        <div id="adminOrders">Y√ºkl…ônir...</div>
    </div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBykQbnz828fnJSYpaWZb9lVMt76y5uYp8",
        authDomain: "azad042-65afa.firebaseapp.com",
        databaseURL: "https://azad042-65afa-default-rtdb.firebaseio.com",
        projectId: "azad042-65afa",
        storageBucket: "azad042-65afa.firebasestorage.app",
        messagingSenderId: "568634268703",
        appId: "1:568634268703:web:3c3dd14a071b0ffe73492a"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function addProduct() {
        const name = document.getElementById("pName").value;
        const price = document.getElementById("pPrice").value;
        const img = document.getElementById("pImg").value;
        const cat = document.getElementById("pCategory").value;
        const tag = document.getElementById("pTag").value;
        
        if(!name || !price) return alert("Ad v…ô qiym…ôt m√ºtl…ôqdir!");

        db.ref('products').push({ name, price, img, category: cat, tag });
        alert("M…ôhsul " + cat + " b√∂lm…ôsin…ô …ôlav…ô edildi!");
        location.reload();
    }

    db.ref('orders').on('value', snap => {
        let html = "";
        snap.forEach(child => {
            let o = child.val();
            html += `<div class="order-card">
                <div style="display:flex; justify-content:space-between;">
                    <b>Sifari≈ü #${o.id}</b>
                    <span style="color:#2563eb;">${o.total}</span>
                </div>
                <div style="margin: 10px 0; font-size: 14px;">
                    üë§ ${o.customer} (${o.phone})<br>
                    üìç ${o.address || '√únvan qeyd edilm…ôyib'}<br>
                    üì¶ ${o.items}
                </div>
                <select class="status-select" onchange="updateStatus('${child.key}', this.value)">
                    <option ${o.status=='Sifari≈ü verildi'?'selected':''}>Sifari≈ü verildi</option>
                    <option ${o.status=='Hazƒ±rlanƒ±r'?'selected':''}>Hazƒ±rlanƒ±r</option>
                    <option ${o.status=='Paketl…ôm…ô'?'selected':''}>Paketl…ôm…ô</option>
                    <option ${o.status=='Yola d√º≈ü√ºb'?'selected':''}>Yola d√º≈ü√ºb</option>
                    <option ${o.status=='T…ôhvil verildi'?'selected':''}>T…ôhvil verildi</option>
                </select>
                <button class="red-btn" onclick="deleteOrder('${child.key}')">Sil</button>
            </div>`;
        });
        document.getElementById("adminOrders").innerHTML = html || "Sifari≈ü yoxdur.";
    });

    window.updateStatus = (key, st) => db.ref('orders/'+key).update({status: st});
    window.deleteOrder = key => confirm("Silm…ôk ist…ôyirsiniz?") && db.ref('orders/'+key).remove();
</script>
</body>
</html>
