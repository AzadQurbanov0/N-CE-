!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <title>Azad Store | Admin</title>
    <style>
        body { font-family: sans-serif; background: #f1f5f9; padding: 20px; }
        .box { background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        input, select { width: 100%; padding: 10px; margin: 5px 0 15px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        button { background: #2563eb; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; }
        .red-btn { background: #dc2626; margin-left: 5px; }
        .item-list { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #eee; align-items: center; }
        .order-card { background: #fff; padding: 15px; border-left: 5px solid #2563eb; margin-bottom: 10px; border-radius: 5px; }
    </style>
</head>
<body>

    <h2>Admin Panel</h2>

    <div class="box">
        <h3>Yeni Məhsul Əlavə Et</h3>
        <input id="pName" placeholder="Ad">
        <input id="pPrice" placeholder="Qiymət">
        <input id="pImg" placeholder="Şəkil Linki">
        <button onclick="addProduct()">Əlavə Et</button>
    </div>

    <div class="box">
        <h3>Məhsul Siyahısı (Silmək üçün)</h3>
        <div id="adminProductList"></div>
    </div>

    <div class="box">
        <h3>Sifarişlər</h3>
        <div id="adminOrders"></div>
    </div>

<script>
    function addProduct() {
        let products = JSON.parse(localStorage.getItem("products")) || [];
        products.push({ id: Date.now(), name: document.getElementById("pName").value, price: document.getElementById("pPrice").value, img: document.getElementById("pImg").value });
        localStorage.setItem("products", JSON.stringify(products));
        location.reload();
    }

    function renderAdminProducts() {
        let products = JSON.parse(localStorage.getItem("products")) || [];
        document.getElementById("adminProductList").innerHTML = products.map(p => `
            <div class="item-list">
                <span>${p.name} - ${p.price} AZN</span>
                <button class="red-btn" onclick="deleteProduct(${p.id})">Məhsulu Sil</button>
            </div>
        `).join('');
    }

    function deleteProduct(id) {
        if(confirm("Bu məhsulu silmək istəyirsiz?")) {
            let products = JSON.parse(localStorage.getItem("products")) || [];
            products = products.filter(p => p.id != id);
            localStorage.setItem("products", JSON.stringify(products));
            renderAdminProducts();
        }
    }

    function renderOrders() {
        let orders = JSON.parse(localStorage.getItem("orders")) || [];
        document.getElementById("adminOrders").innerHTML = orders.reverse().map(o => `
            <div class="order-card">
                <b>ID: #${o.id}</b> | Müştəri: ${o.customer}<br>
                Status: <b>${o.status}</b><br>
                <select onchange="updateStatus(${o.id}, this.value)">
                    <option value="">Statusu Dəyiş</option>
                    <option value="Hazırlanır">Hazırlanır</option>
                    <option value="Paketleme">Paketleme</option>
                    <option value="Yola düşüb">Yola düşüb</option>
                    <option value="Təhvil verildi">Təhvil verildi</option>
                </select>
                <button class="red-btn" onclick="deleteOrder(${o.id})">Sifarişi Sil</button>
            </div>
        `).join('');
    }

    function updateStatus(id, stat) {
        let orders = JSON.parse(localStorage.getItem("orders")) || [];
        let idx = orders.findIndex(o => o.id == id);
        orders[idx].status = stat;
        localStorage.setItem("orders", JSON.stringify(orders));
        renderOrders();
    }

    function deleteOrder(id) {
        if(confirm("Sifarişi silmək istəyirsiz?")) {
            let orders = JSON.parse(localStorage.getItem("orders")) || [];
            orders = orders.filter(o => o.id != id);
            localStorage.setItem("orders", JSON.stringify(orders));
            renderOrders();
        }
    }

    renderAdminProducts();
    renderOrders();
</script>
</body>
</html>
